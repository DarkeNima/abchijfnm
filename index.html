<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Fire Christmas Membership Giveaway</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <header>
        <div class="container">
            <h1><i class="fas fa-satellite-dish"></i> Free Fire Membership Unlock</h1>
            <div class="christmas-banner">âš¡ Exclusive Giveaway Event!</div>
        </div>
    </header>

    <main class="container">
        
        <section id="page-form" class="page-section active">
            <h2>Enter Player Details & Select Membership</h2>
            <form id="giveaway-form">
                
                <div class="form-group">
                    <label for="player-id">Free Fire Player ID (Numeric)</label>
                    <input type="text" id="player-id" name="playerId" required pattern="\d{6,12}" 
                           aria-required="true" title="6-12 digits required">
                    <div class="error-message" id="error-player-id"></div>
                </div>

                <div class="form-group">
                    <label for="player-name">Player Name</label>
                    <input type="text" id="player-name" name="playerName" required aria-required="true">
                    <div class="error-message" id="error-player-name"></div>
                </div>

                <div class="form-group">
                    <label for="region">Free Fire Region</label>
                    <select id="region" name="region" required aria-required="true">
                        <option value="">-- Select Region --</option>
                        <option value="Asia">Asia</option>
                        <option value="Europe">Europe</option>
                        <option value="North America">North America</option>
                        <option value="South America">South America</option>
                        <option value="Africa">Africa</option>
                        <option value="Oceania">Oceania</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-message" id="error-region"></div>
                </div>

                <div class="form-group">
                    <label>Select Membership</label>
                    <div class="membership-options">
                        <label>
                            <input type="radio" name="membership" value="Weekly" required aria-required="true">
                            Weekly Membership
                        </label>
                        <label>
                            <input type="radio" name="membership" value="Weekly Lite">
                            Weekly Lite Membership
                        </label>
                        <label>
                            <input type="radio" name="membership" value="Monthly">
                            Monthly Membership
                        </label>
                    </div>
                    <div class="error-message" id="error-membership"></div>
                </div>

                <div class="form-group topup-group">
                    <label for="wallet-amount">Optional Wallet Top-up Amount</label>
                    <div class="currency-input-group">
                        <input type="number" id="wallet-amount" name="walletAmount" min="0" value="0">
                        <select id="currency" name="currency">
                            <option value="LKR">LKR (Rs.)</option>
                            <option value="USD">USD ($)</option>
                        </select>
                    </div>
                    <div class="error-message" id="error-wallet-amount"></div>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="agree-terms" name="agreeTerms" required aria-required="true">
                    <label for="agree-terms">I agree to the <a href="#terms" target="_blank">Terms & Conditions</a></label>
                    <div class="error-message" id="error-agree-terms"></div>
                </div>

                <button type="submit" id="submit-form-btn" class="cta-button">Proceed to Share <i class="fas fa-arrow-right"></i></button>
            </form>
        </section>

        <section id="page-share" class="page-section hidden">
            <h2><i class="fab fa-whatsapp"></i> Share to Unlock Your Key!</h2>
            
            <div class="summary-box">
                <h3>Your Submission Summary:</h3>
                <p><strong>Player ID:</strong> <span id="summary-id"></span></p>
                <p><strong>Player Name:</strong> <span id="summary-name"></span></p>
                <p><strong>Region:</strong> <span id="summary-region"></span></p>
                <p><strong>Membership:</strong> <span id="summary-membership"></span></p>
                <p><strong>Wallet Amount:</strong> <span id="summary-wallet"></span></p>
            </div>
            
            <p class="share-instructions">
                To win your membership, you must share the giveaway message to 
                <strong>at least 8 different WhatsApp groups</strong> and reach a total of 
                <strong>18 shares</strong> (aggregate).
            </p>

            <button id="whatsapp-share-btn" class="cta-button whatsapp-button">
                <i class="fab fa-whatsapp"></i> Share to WhatsApp
            </button>
            <p class="desktop-fallback-note">
                (On desktop, copy the message and share manually; then click "I Shared" below)
            </p>
            
            <div class="manual-share-confirm">
                <h3>Confirm Your Share:</h3>
                <div class="form-group">
                    <label for="group-name">Group Name / Number Shared To:</label>
                    <input type="text" id="group-name" placeholder="E.g., FF Squad 01, 071XXXXXXX" aria-label="Group name or number">
                </div>
                <button id="manual-share-btn" class="cta-button secondary-button">
                    <i class="fas fa-check"></i> I Shared Successfully
                </button>
                <div class="error-message" id="error-share-group"></div>
            </div>

            <div class="progress-box">
                <h3><i class="fas fa-chart-line"></i> Your Progress:</h3>
                
                <div class="progress-item">
                    <p>Groups shared to: <span id="progress-groups">0</span> / 8</p>
                    <div class="progress-bar-container">
                        <div id="progress-bar-groups" class="progress-bar"></div>
                    </div>
                    <span id="groups-checklist" class="checklist-status"></span>
                </div>
                
                <div class="progress-item">
                    <p>Total shares: <span id="progress-total">0</span> / 18</p>
                    <div class="progress-bar-container">
                        <div id="progress-bar-total" class="progress-bar"></div>
                    </div>
                    <span id="total-shares-checklist" class="checklist-status"></span>
                </div>
            </div>

            <div id="debug-panel" class="debug-panel hidden">
                <h4><i class="fas fa-bug"></i> Debug Mode (QA Only)</h4>
                <button id="debug-share-btn" class="small-button">+1 Share (Total)</button>
                <button id="debug-group-btn" class="small-button">+1 Unique Group</button>
                <p>Warning: Progress is lost if browser storage is cleared.</p>
            </div>
        </section>

        <div id="success-modal" class="modal hidden">
            <div class="modal-content">
                <h2><i class="fas fa-trophy"></i> Key Unlocked!</h2>
                <p>You have successfully completed the share requirements.</p>
                <div class="key-display-area">
                    <p>Your Membership Key:</p>
                    <code id="membership-key-output">FF-XXXX-XXXX-XXXX</code>
                </div>
                
                <div class="modal-actions">
                    <button id="copy-key-btn" class="cta-button primary-button"><i class="fas fa-copy"></i> Copy Key</button>
                    <button id="whatsapp-key-btn" class="cta-button secondary-button"><i class="fab fa-whatsapp"></i> Send Key to Me (WhatsApp)</button>
                    <button id="download-key-btn" class="cta-button secondary-button"><i class="fas fa-download"></i> Download Key (TXT)</button>
                </div>

                <p class="activation-note">
                    <i class="fas fa-info-circle"></i> Your membership will be activated in the next **24 hours**. Please keep your key safe.
                </p>
                <button id="close-modal-btn" class="small-button">Close</button>
            </div>
        </div>

        <section id="admin-panel" class="page-section hidden">
            <h2><i class="fas fa-users-cog"></i> Admin Submissions Log</h2>
            <p>Admin Mode is active. Data is read from localStorage only.</p>
            <ul id="submission-list">
                <li>No submissions found.</li>
            </ul>
            <button id="clear-localstorage-btn" class="small-button danger-button">Clear All Local Storage Data</button>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Free Fire Giveaway. | <a href="#contact">Contact Us</a> | <a href="#terms">T&C</a></p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
